<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fuzz Me</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/spinner.css" />
    <script src="js/main.js" defer> </script>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <div class="container-fluid">
          <button
            class="navbar-toggler"
            type="button"
            data-mdb-toggle="collapse"
            data-mdb-target="#navbarExample01"
            aria-controls="navbarExample01"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <i class="fas fa-bars"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarExample01">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item active">
                <a class="nav-link" aria-current="page" href="about.html">About</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <div class="jumbotron  bg-white mx-auto" style="width: 50%; ">
      <h1 style="text-align: center; color:darkslategrey">Welcome to FuzzMe</h1>
      <h6 style="text-align: center" class="mb-3">FuzzMe is an app designed to mask your online presence. With FuzzMe, we protect your privacy by flooding the internet with either images, or text prompts which spread false information about you. By flooding the internet with enough false information, it will become impossible to distinguish fact from reality. Your name can no longer be tainted online since we will taint it first. Read about all of our features on the about page. When you're ready, select any one of our features and prepare to be fuzzed.</h4>


    </div> 
    <div class="jumbotron" style="padding: 10%">
      <section class="showcase">
        <form id="image-form">
          <label for="image-file">Select an image file:</label><br>
          <input type="file" id="image-file" accept="image/*">

          <button type="submit" class="btn btn-primary">Generate</button>
        </form>
        <canvas id="canvas"></canvas>
      </section>
      
      <section class="image">
        <div class="image-container">
          <h2 class="msg"></h2>
          <img src="" alt="" id="image" />
        </div>
      </section>
    </div>

    <div class="spinner"></div>
  </body>
  <script>
    const fileInput = document.querySelector('#image-file');
    const canvas = document.querySelector('#canvas');
    const ctx = canvas.getContext('2d');

    fileInput.addEventListener('change', () => {
      const reader = new FileReader();
      reader.onload = function() {
        const img = new Image();
        img.onload = function() {
          canvas.width = img.width;
          canvas.height = img.height;
          console.log(img.width);
          ctx.drawImage(img, 0, 0);
        };
        img.src = reader.result;
      };
      reader.readAsDataURL(fileInput.files[0]);
    });
    let isDrawing = false;

    canvas.addEventListener('mousedown', (event) => {
      isDrawing = true;
      ctx.beginPath();
      ctx.moveTo(event.offsetX, event.offsetY);
    });

    canvas.addEventListener('mousemove', (event) => {
    if (isDrawing) {
    // Set the composite operation of the canvas context to "destination-out"
    // to clear the pixels from the canvas
      ctx.globalCompositeOperation = "destination-out";
      ctx.lineTo(event.offsetX, event.offsetY);

      ctx.stroke();

      ctx.lineWidth = 50;
      ctx.lineCap = "round";
    }
  });

  canvas.addEventListener('mouseup', () => {
    isDrawing = false;
  }); 

  </script>
</html>